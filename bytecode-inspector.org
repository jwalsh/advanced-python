#+TITLE: Python Bytecode Inspector
#+AUTHOR: jwalsh
#+DATE: [2025-04-04]
#+PROPERTY: header-args:python :tangle bytecode_inspector.py :mkdirp t

* Python Bytecode Inspector

This tool compiles Python files to bytecode and allows inspection of the generated bytecode.

** Implementation

#+begin_src python
# bytecode_inspector.py code here...
#+end_src

** Usage Examples

*** Compile and inspect closures.py
#+begin_src shell :results output
python bytecode_inspector.py closures.py
#+end_src

*** Inspect existing bytecode without recompiling
#+begin_src shell :results output
python bytecode_inspector.py closures.py --no-compile
#+end_src

*** Batch process multiple files
#+begin_src shell :results output
for file in *.py; do
  echo "Processing $file..."
  python bytecode_inspector.py "$file"
done
#+end_src

** Mermaid Diagram: Bytecode Inspection Process

#+begin_src mermaid :file bytecode_process.png
flowchart TD
    A[Python Source File] -->|py_compile| B[.pyc File]
    B -->|importlib| C[Load Module]
    B -->|direct read| D[Read Raw Bytecode]
    C -->|dis.dis| E[Disassemble Functions]
    D -->|marshal.load| F[Load Code Object]
    F -->|dis.dis| G[Disassemble Raw Bytecode]
    E --> H[Bytecode Analysis]
    G --> H
#+end_src

* Future Enhancements
- Add comparison between different Python versions
- Visualize bytecode execution flow
- Analyze optimization opportunities
